webpackJsonp([1],{"+Px+":function(t,e){t.exports=[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"American Samoa",abbreviation:"AS"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District Of Columbia",abbreviation:"DC"},{name:"Federated States Of Micronesia",abbreviation:"FM"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Guam",abbreviation:"GU"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Palau",abbreviation:"PW"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virgin Islands",abbreviation:"VI"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}]},"7zck":function(t,e){},H6kn:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),a=i("3EgV"),r=i.n(a),n=(i("7zck"),{name:"App",data:function(){return{exportDialog:!1,subscriptionMonth:""}},mounted:function(){var t=new Date,e=new Date,i=(e=11==t.getMonth()?new Date(t.getFullYear()+1,0,1):new Date(t.getFullYear(),t.getMonth()+1,1)).getMonth()+1<10?"0"+(e.getMonth()+1):""+(e.getMonth()+1);this.subscriptionMonth=e.getFullYear()+"-"+i},methods:{exportLink:function(){var t=this.subscriptionMonth.split("-");return"/api/v1/export?year="+t[0]+"&month="+t[1]}}}),o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("v-app",[i("v-navigation-drawer",{attrs:{app:"",fixed:"",value:"true",stateless:"",permanent:""}},[i("v-toolbar",{attrs:{flat:""}},[i("v-list",[i("v-list-tile",[i("v-list-tile-title",{staticClass:"title"},[t._v("\n          Popcorn Cove Subscriptions\n        ")])],1)],1)],1),t._v(" "),i("v-divider"),t._v(" "),i("v-list",[i("v-list-tile",{staticClass:"menu-tile"},[i("v-list-tile-action",[i("v-icon",[t._v("fas fa-shopping-cart")])],1),t._v(" "),i("v-list-tile-content",[i("v-list-tile-title",[i("router-link",{attrs:{to:"/"}},[t._v("\n            Place or Edit a Subscription\n            ")])],1)],1)],1),t._v(" "),i("v-list-tile",{staticClass:"menu-tile"},[i("v-list-tile-action",[i("v-icon",[t._v("fas fa-plus-circle")])],1),t._v(" "),i("v-list-tile-content",[i("v-list-tile-title",[i("router-link",{attrs:{to:"/items"}},[t._v("\n              Add Subscription Item\n            ")])],1)],1)],1)],1),t._v(" "),i("v-tooltip",{attrs:{bottom:"","max-width":"250px"}},[i("v-btn",{staticStyle:{"margin-left":"auto","margin-right":"auto",display:"block"},attrs:{slot:"activator"},on:{click:function(e){t.exportDialog=!0}},slot:"activator"},[i("v-icon",[t._v("fas fa-download")]),t._v("\n        Â  Export Monthly Report\n      ")],1),t._v(" "),i("span",[t._v("Download this month's subscription report for all customers in the database.")])],1)],1),t._v(" "),i("v-dialog",{attrs:{width:"600px"},model:{value:t.exportDialog,callback:function(e){t.exportDialog=e},expression:"exportDialog"}},[i("v-card",{attrs:{tile:""}},[i("v-card-title",[i("h2",[t._v("Choose a Subscription Month")])]),t._v(" "),i("v-card-actions"),t._v(" "),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{"text-xs-center":""}},[i("v-date-picker",{attrs:{type:"month"},model:{value:t.subscriptionMonth,callback:function(e){t.subscriptionMonth=e},expression:"subscriptionMonth"}})],1)],1),t._v(" "),i("v-card-actions",[i("v-btn",{on:{click:function(e){t.exportDialog=!1}}},[t._v("Close")]),t._v(" "),i("v-btn",{staticClass:"success",attrs:{href:t.exportLink(),disabled:!t.subscriptionMonth}},[t._v("Get Subscription")])],1)],1)],1),t._v(" "),i("v-content",[i("v-container",{attrs:{fluid:""}},[i("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var l=i("VU/8")(n,o,!1,function(t){i("ly95")},null,null).exports,c=i("/ocq"),d=i("6CZb"),u=i.n(d),m=i("fK0I"),v=i.n(m),p=i("gDPd"),b=i.n(p),h=i("Eoz/"),f=i.n(h),_=i("+Px+"),g={name:"order",data:function(){return{customer:void 0,customers:[],address:void 0,addresses:[],subscription:void 0,subscriptions:[],orderDialog:!1,stepper:1,byField:"name",byFields:["name","email","phone"],validCustomer:!1,disableCustomerForm:!1,name:"",nameRules:[function(t){return!!t||"Name is required"},function(t){return!!t&&t.length<=70||"Name must be less than 70 characters"}],email:"",emailRules:[function(t){return!!t||"Phone Number is required"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,4})+$/.test(t)||"E-mail must be valid"}],phone:"",phoneRules:[function(t){return!!t||"Phone Number is required"},function(t){return/\(\d+\)| |-|\d+/.test(t)||"Phone Number must be valid"}],customernamefilter:function(t,e,i){var s=function(t){return null!=t?t:""},a=s(t.name),r=s(e);return a.toString().toLowerCase().indexOf(r.toString().toLowerCase())>-1},customeremailfilter:function(t,e,i){var s=function(t){return null!=t?t:""},a=s(t.email),r=s(e);return a.toString().toLowerCase().indexOf(r.toString().toLowerCase())>-1},customerphonefilter:function(t,e,i){var s=function(t){return null!=t?t:""},a=s(t.phone),r=s(e);return a.toString().toLowerCase().indexOf(r.toString().toLowerCase())>-1},street:"",city:"",state:"",zip:"",zipRules:[function(t){return!!t||"Zip Code is required"},function(t){return/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(t)||"Zip Code must be valid"}],states:_,statefilter:function(t,e,i){var s=function(t){return null!=t?t:""},a=s(t.name),r=s(e);return a.toString().toLowerCase().indexOf(r.toString().toLowerCase())>-1},addressfilter:function(t,e,i){var s=function(t){return null!=t?t:""},a=s(t.address),r=s(e);return a.toString().toLowerCase().indexOf(r.toString().toLowerCase())>-1},phonefilter:function(t,e,i){var s=function(t){return null!=t?t:""},a=s(t.phone),r=s(e);return a.toString().toLowerCase().indexOf(r.toString().toLowerCase())>-1},validShipping:!1,disableShippingForm:!1,valid:!1,disableForm:!1,item:void 0,items:[],startDate:"",stopDate:"",startDatemenu:!1,stopDatemenu:!1,note:"",subscriptionfilter:function(t,e,i){var s=function(t){return null!=t?t:""},a=s(t.id),r=s(e);return a.toString().toLowerCase().indexOf(r.toString().toLowerCase())>-1}}},mounted:function(){this.getAllCustomers(),this.getItems()},methods:{getAllCustomers:function(){var t=this;this.$http.get("/api/v1/customer").then(function(e){t.customers=e.data})},createCustomer:function(){var t=this;this.$refs.customerForm.validate()&&this.$http.post("/api/v1/customer",{name:this.name,phone:this.phone,email:this.email}).then(function(e){t.$toasted.show("Customer created"),t.customer=e.data,t.getAllCustomers()}).catch(function(e){t.$toasted.err("Failed to create customer"),console.log(e)})},updateCustomer:function(){var t=this;this.$refs.customerForm.validate()&&this.$http.put("/api/v1/customer/"+this.customer.id,{name:this.name,phone:this.phone,email:this.email}).then(function(e){t.$toasted.show("Customer updated"),t.customer=e.data,t.getAllCustomers()}).catch(function(e){t.$toasted.err("Failed to update customer"),console.log(e)})},getAllAddresses:function(t){var e=this;this.customer&&this.customer.id&&this.$http.get("/api/v1/shippingaddress/"+this.customer.id).then(function(i){e.addresses=i.data,t&&t()}).catch(function(t){console.log(t)})},createAddress:function(){var t=this;this.$refs.customerForm.validate()&&this.$http.post("/api/v1/shippingaddress",{customerID:this.customer.id,address:this.street,city:this.city,state:this.state,zip:this.zip}).then(function(e){t.$toasted.show("Address created"),t.address=e.data,t.getAllAddresses()}).catch(function(e){t.$toasted.err("Failed to create address"),console.log(e)})},updateAddress:function(){var t=this;this.$refs.shippingForm&&this.$refs.shippingForm.validate()&&this.$http.put("/api/v1/shippingaddress/"+this.address.id,{customerID:this.customer.id,address:this.street,city:this.city,state:this.state,zip:this.zip}).then(function(e){t.$toasted.show("Address updated"),t.address=e.data,t.getAllAddresses()}).catch(function(e){t.$toasted.err("Failed to update address"),console.log(e)})},setPreferredAddress:function(){var t=this;this.$http.put("/api/v1/customer/"+this.customer.id,{name:this.customer.name,phone:this.customer.phone,email:this.customer.email,preferredShippingAddress:this.address.id}).then(function(e){t.$toasted.show("Preferred address set"),t.customer=e.data,t.$http.get("/api/v1/customer").then(function(e){t.customers=e.data})}).catch(function(e){t.$toasted.err("Failed to set preferred address"),console.log(e)})},getItems:function(){var t=this;this.$http.get("/api/v1/item").then(function(e){t.items=e.data}).catch(function(e){t.$toasted.error("Failed to fetch subscription items")})},getAllSubscriptions:function(t){var e=this;this.$http.get("/api/v1/subscription/"+this.customer.id).then(function(i){e.subscriptions=i.data,t&&t()}).catch(function(t){e.$toasted.error("Failed to fetch subscriptions")})},allowedStartDates:function(t){return u()(t)},allowedEndDates:function(t){return!b()(t,this.startDate)&&u()(t)},updateSubscription:function(){var t=this;this.$refs.subscriptionForm.validate()&&this.$http.put("/api/v1/subscription/"+this.subscription.id,{customerID:this.customer.id,itemID:this.item.id,shippingAddressID:this.address.id,startDate:this.startDate,stopDate:this.stopDate,note:this.note}).then(function(e){t.$toasted.show("Subscription updated"),t.subscription=e.data,t.getAllSubscriptions()}).catch(function(e){t.$toasted.err("Failed to update subscription"),console.log(e)})},createSubscription:function(){var t=this;this.$refs.subscriptionForm.validate()&&this.$http.post("/api/v1/subscription",{customerID:this.customer.id,itemID:this.item.id,shippingAddressID:this.address.id,startDate:this.startDate,stopDate:this.stopDate,note:this.note}).then(function(e){t.$toasted.show("Subscription created"),t.subscription=e.data,t.getAllSubscriptions()}).catch(function(e){t.$toasted.err("Failed to create subscription"),console.log(e)})}},computed:{startDateFormatted:{get:function(){return this.startDate?f()(this.startDate,"MMMM YYYY"):""},set:function(t){return f()(t,"YYYY-MM")}},stopDateFormatted:{get:function(){if(this.stopDate)return f()(this.stopDate,"MMMM YYYY")},set:function(t){return f()(t,"YYYY-MM")}}},watch:{customer:function(t){var e=this;t?(this.name=t.name,this.email=t.email,this.phone=t.phone,this.disableCustomerForm=!0,this.getAllAddresses(function(){e.customer.preferredShippingAddress?e.address=e.addresses.filter(function(t){return t.id===e.customer.preferredShippingAddress})[0]:e.addresses.length>0&&(e.address=e.addresses[0])})):(this.$refs.customerForm.reset(),this.disableCustomerForm=!1,this.$refs.shippingForm&&this.$refs.shippingForm.reset(),this.disableShippingForm=!1,this.$refs.subscriptionForm&&this.$refs.subscriptionForm.reset(),this.disableForm=!1,this.customer=void 0,this.address=void 0,this.subscription=void 0)},address:function(t){var e=this;t?(this.disableShippingForm=!0,this.street=t.address,this.city=t.city,this.state=t.state,this.zip=t.zip,this.getAllSubscriptions(function(){e.subscriptions.length>0&&(e.subscription=e.subscriptions[0])})):(this.$refs.shippingForm.reset(),this.disableShippingForm=!1,this.$refs.subscriptionForm&&this.$refs.subscriptionForm.reset(),this.disableForm=!1,this.address=void 0,this.subscription=void 0)},subscription:function(t){var e=this;t?(this.items.forEach(function(i){i.id===t.itemID&&(e.item=i)}),this.disableForm=!0,this.stopDate=t.stopDate,this.startDate=t.startDate,this.note=t.note):(this.$refs.subscriptionForm.reset(),this.disableForm=!1,this.subscription=void 0,this.startDate="",this.stopDate="")},startDate:function(){v()(this.startDate,this.stopDate)&&(this.stopDate="")}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-stepper",{model:{value:t.stepper,callback:function(e){t.stepper=e},expression:"stepper"}},[i("v-stepper-header",[i("v-stepper-step",{attrs:{complete:t.stepper>1,step:"1"}},[t._v("\n        Choose or create a customer\n      ")]),t._v(" "),i("v-divider"),t._v(" "),i("v-stepper-step",{attrs:{complete:t.stepper>2,step:"2"}},[t._v("\n        Choose a Shipping Address\n      ")]),t._v(" "),i("v-divider"),t._v(" "),i("v-stepper-step",{attrs:{complete:t.stepper>3,step:"3"}},[t._v("\n        Create or Change a Subscription\n      ")])],1),t._v(" "),i("v-stepper-items",[i("v-stepper-content",{attrs:{step:"1"}},[i("v-card",{staticStyle:{"max-width":"55em",margin:"auto"},attrs:{flat:""}},[i("v-card-title",{attrs:{"primary-title":""}},[i("h1",{staticClass:"headline mb-0"},[t._v("Choose or Create a Customer")])]),t._v(" "),i("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("h2",[t._v("Choose a Customer")])]),t._v(" "),i("v-flex",{attrs:{xs8:""}},["name"===t.byField?i("v-autocomplete",{attrs:{items:t.customers,"return-object":!0,"item-text":"name",label:"Customer Name",filter:t.customernamefilter,clearable:""},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}}):t._e(),t._v(" "),"email"===t.byField?i("v-autocomplete",{attrs:{items:t.customers,"return-object":!0,"item-text":"email",label:"Customer Email",filter:t.customeremailfilter,clearable:""},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}}):t._e(),t._v(" "),"phone"===t.byField?i("v-autocomplete",{attrs:{items:t.customers,"return-object":!0,"item-text":"phone",label:"Customer Phone",filter:t.customerphonefilter,clearable:""},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}}):t._e()],1),t._v(" "),i("v-flex",{attrs:{xs4:""}},[i("v-select",{attrs:{items:t.byFields,label:"Field"},model:{value:t.byField,callback:function(e){t.byField=e},expression:"byField"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-divider")],1)],1)],1),t._v(" "),i("v-form",{ref:"customerForm",model:{value:t.validCustomer,callback:function(e){t.validCustomer=e},expression:"validCustomer"}},[i("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("h2",{staticClass:"pt-2"},[t._v("Customer Information")])]),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{rules:t.nameRules,label:"Name",required:"",disabled:t.disableCustomerForm},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",required:"",disabled:t.disableCustomerForm},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{rules:t.phoneRules,label:"Phone Number",mask:"phone",required:"",disabled:t.disableCustomerForm},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),t._v(" "),i("v-flex",[t.customer?t._e():i("v-btn",{staticStyle:{float:"left"},attrs:{disabled:!t.validCustomer,color:"primary"},on:{click:function(e){t.createCustomer()}}},[t._v("Create Customer")]),t._v(" "),t.customer&&!t.disableCustomerForm?i("v-btn",{staticStyle:{float:"left"},attrs:{disabled:!t.validCustomer},on:{click:function(e){t.updateCustomer(),t.disableCustomerForm=!t.disableCustomerForm}}},[t._v("Update Customer")]):t._e(),t._v(" "),t.customer&&t.disableCustomerForm?i("v-btn",{staticStyle:{float:"left"},on:{click:function(e){t.disableCustomerForm=!t.disableCustomerForm}}},[t._v("Edit Customer")]):t._e()],1)],1)],1)],1),t._v(" "),i("v-card-actions",{staticClass:"mt-4"},[i("v-btn",{attrs:{disabled:!t.customer},nativeOn:{click:function(e){t.stepper=2}}},[t._v("Next")])],1)],1)],1),t._v(" "),i("v-stepper-content",{attrs:{step:"2"}},[t.customer?i("v-card",{staticStyle:{"max-width":"55em",margin:"auto"},attrs:{flat:""}},[i("v-card-title",{attrs:{"primary-title":""}},[i("h1",{staticClass:"headline mb-0"},[t._v("Shipping Address for "),i("em",[t._v(t._s(t.customer.name))])])]),t._v(" "),i("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("h2",[t._v("Choose a Shipping Address")])]),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-select",{attrs:{items:t.addresses,"return-object":!0,"item-text":"address",label:"Address",filter:t.addressfilter,clearable:""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-divider")],1)],1)],1),t._v(" "),i("v-form",{ref:"shippingForm",model:{value:t.validShipping,callback:function(e){t.validShipping=e},expression:"validShipping"}},[i("v-container",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs4:""}},[t.address&&t.customer.preferredShippingAddress===t.address.id?i("span",[t._v("Preferred Address")]):i("v-btn",{attrs:{disabled:!(t.address&&t.address.id)},on:{click:function(e){t.setPreferredAddress()}}},[t._v("Set as Preferred Address")])],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"Street Address",rules:[function(t){return!!t||"Address is required"}],required:"",disabled:t.disableShippingForm},model:{value:t.street,callback:function(e){t.street=e},expression:"street"}})],1),t._v(" "),i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{attrs:{label:"City",rules:[function(t){return!!t||"City is required"}],required:"",disabled:t.disableShippingForm},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}})],1),t._v(" "),i("v-flex",{attrs:{xs4:""}},[i("v-autocomplete",{attrs:{items:t.states,rules:[function(t){return!!t||"Item is required"}],"item-text":"name","item-value":"name",label:"State",filter:t.statefilter,required:"",disabled:t.disableShippingForm},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1),t._v(" "),i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{attrs:{label:"Zip Code",required:"",rules:t.zipRules,disabled:t.disableShippingForm},model:{value:t.zip,callback:function(e){t.zip=e},expression:"zip"}})],1),t._v(" "),i("v-flex",[t.address?t._e():i("v-btn",{staticStyle:{float:"left"},attrs:{disabled:!t.validShipping,color:"primary"},on:{click:function(e){t.createAddress()}}},[t._v("Create Address")]),t._v(" "),t.address&&!t.disableShippingForm?i("v-btn",{staticStyle:{float:"left"},attrs:{disabled:!t.validShipping},on:{click:function(e){t.updateAddress(),t.disableShippingForm=!t.disableShippingForm}}},[t._v("Update Address")]):t._e(),t._v(" "),t.address&&t.disableShippingForm?i("v-btn",{staticStyle:{float:"left"},on:{click:function(e){t.disableShippingForm=!t.disableShippingForm}}},[t._v("Edit Address")]):t._e()],1)],1)],1)],1),t._v(" "),i("v-card-actions",[i("v-btn",{nativeOn:{click:function(e){t.stepper=1}}},[t._v("Previous")]),t._v(" "),i("v-btn",{attrs:{disabled:!t.address},nativeOn:{click:function(e){t.stepper=3}}},[t._v("Next")])],1)],1):t._e()],1),t._v(" "),i("v-stepper-content",{attrs:{step:"3"}},[i("v-card",{staticStyle:{"max-width":"55em",margin:"auto"},attrs:{flat:""}},[i("v-card-title",{attrs:{"primary-title":""}},[i("h1",{staticClass:"headline mb-0"},[t._v("\n            Subscription for "),t.customer?i("em",[t._v(t._s(t.customer.name))]):t._e()])]),t._v(" "),i("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("h2",[t._v("Choose a Subscription")])]),t._v(" "),i("v-flex",{attrs:{xs4:""}},[i("v-autocomplete",{attrs:{items:t.subscriptions,"item-text":"id",label:"Subscription Number",filter:t.subscriptionfilter,"return-object":!0,clearable:""},model:{value:t.subscription,callback:function(e){t.subscription=e},expression:"subscription"}})],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-divider")],1)],1)],1),t._v(" "),i("v-form",{ref:"subscriptionForm",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-container",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-autocomplete",{attrs:{items:t.items,"item-text":"name",rules:[function(t){return!!t||"Item is required"}],"return-object":!0,label:"Order Item",required:"",disabled:t.disableForm},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1),t._v(" "),i("v-flex",{attrs:{xs5:""}},[i("v-menu",{ref:"startmenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.startDate,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){t.startDate=e}},model:{value:t.startDatemenu,callback:function(e){t.startDatemenu=e},expression:"startDatemenu"}},[i("v-text-field",{attrs:{slot:"activator",label:"Choose Start Month","prepend-icon":"event",rules:[function(t){return!!t||"Item is required"}],disabled:t.disableForm,required:"",readonly:""},slot:"activator",model:{value:t.startDateFormatted,callback:function(e){t.startDateFormatted=e},expression:"startDateFormatted"}}),t._v(" "),i("v-date-picker",{attrs:{type:"month","allowed-dates":t.allowedStartDates,scrollable:""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v(" "),i("v-spacer"),t._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.startDatemenu=!1}}},[t._v("Cancel")]),t._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.$refs.startmenu.save(t.startDate)}}},[t._v("OK")])],1)],1),t._v(" "),i("v-flex",{attrs:{xs5:"","offset-xs1":""}},[i("v-menu",{ref:"endmenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.stopDate,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){t.stopDate=e}},model:{value:t.stopDatemenu,callback:function(e){t.stopDatemenu=e},expression:"stopDatemenu"}},[i("v-text-field",{attrs:{slot:"activator",label:"Choose Ending Month","prepend-icon":"event",rules:[function(t){return!!t||"Item is required"}],disabled:t.disableForm,required:"",readonly:""},slot:"activator",model:{value:t.stopDateFormatted,callback:function(e){t.stopDateFormatted=e},expression:"stopDateFormatted"}}),t._v(" "),i("v-date-picker",{attrs:{type:"month","allowed-dates":t.allowedEndDates,scrollable:""},model:{value:t.stopDate,callback:function(e){t.stopDate=e},expression:"stopDate"}}),t._v(" "),i("v-spacer"),t._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.stopDatemenu=!1}}},[t._v("Cancel")]),t._v(" "),i("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.$refs.endmenu.save(t.stopDate)}}},[t._v("OK")])],1)],1),t._v(" "),i("v-flex",{attrs:{xs12:""}},[i("v-textarea",{attrs:{label:"Notes",disabled:t.disableForm},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1),t._v(" "),i("v-flex",[t.subscription?t._e():i("v-btn",{staticStyle:{float:"left"},attrs:{disabled:!t.valid,color:"primary"},on:{click:function(e){t.createSubscription()}}},[t._v("Create Subscription")]),t._v(" "),t.subscription&&!t.disableForm?i("v-btn",{staticStyle:{float:"left"},attrs:{disabled:!t.valid},on:{click:function(e){t.updateSubscription(),t.disableForm=!t.disableForm}}},[t._v("Update Subscription")]):t._e(),t._v(" "),t.subscription&&t.disableForm?i("v-btn",{staticStyle:{float:"left"},on:{click:function(e){t.disableForm=!t.disableForm}}},[t._v("Edit Subscription")]):t._e()],1)],1)],1)],1),t._v(" "),i("v-card-actions",[i("v-btn",{nativeOn:{click:function(e){t.stepper=2}}},[t._v("Previous")]),t._v(" "),i("v-btn",{staticClass:"primary",nativeOn:{click:function(e){t.stepper=1}}},[t._v("Go Back to Beginning")]),t._v(" "),t.customer&&t.item&&t.address&&t.subscription?i("v-btn",{staticClass:"success",nativeOn:{click:function(e){t.orderDialog=!0}}},[t._v("Preview Subscription")]):t._e()],1)],1)],1)],1)],1),t._v(" "),t.customer&&t.item&&t.address&&t.subscription?i("v-dialog",{attrs:{width:"300px"},model:{value:t.orderDialog,callback:function(e){t.orderDialog=e},expression:"orderDialog"}},[i("v-card",{attrs:{tile:""}},[i("v-card-text",[i("h2",[t._v("Subscription Preview")]),t._v(" "),i("p",[i("b",[t._v("Customer:")]),t._v(" "+t._s(t.customer.name)),i("br"),t._v(" "),i("b",[t._v("Item:")]),t._v(" "+t._s(t.item.name)+" "),i("br"),t._v(" "),i("b",[t._v("Subscription Dates:")]),t._v(" "+t._s(t._f("formatDate")(t.startDate))+" to "+t._s(t._f("formatDate")(t.stopDate))+"\n        "),i("b",[t._v("Shipping Address:")]),t._v(" "+t._s(t.address.address)+", "+t._s(t.address.city)+", "+t._s(t.address.state)+" "+t._s(t.address.zip)+"\n        ")])]),t._v(" "),i("v-card-actions",[i("v-btn",{on:{click:function(e){t.orderDialog=!1}}},[t._v("Close")])],1)],1)],1):t._e()],1)},staticRenderFns:[]};var D=i("VU/8")(g,x,!1,function(t){i("k4Yb")},"data-v-c702722c",null).exports,C={name:"items",data:function(){return{item:"",items:[],radioGroup:void 0,deleteDialog:!1,deleteID:void 0,migrateID:void 0}},mounted:function(){this.getItems()},methods:{addItem:function(){var t=this;this.$http.post("/api/v1/item",{name:this.item}).then(function(e){t.$toasted.show("Added a new item"),t.item="",t.getItems()}).catch(function(e){t.$toasted.error("Failed to add new item")})},deleteItems:function(t,e){var i=this;this.$http.delete("/api/v1/item/"+t,{params:{migrate:e}}).then(function(t){i.$toasted.show("Item deleted"),i.getItems(),i.deleteDialog=!1}).catch(function(t){i.$toasted.error("Failed to delete item")})},getItems:function(){var t=this;this.$http.get("/api/v1/item").then(function(e){t.items=e.data}).catch(function(e){t.$toasted.error("Unable to fetch subscription items")})}}},F={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{attrs:{flat:""}},[i("v-card-title",{attrs:{"primary-title":""}},[i("h1",{staticClass:"headline mb-0"},[t._v("Add Subscription Items")])]),t._v(" "),i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs4:"","offset-xs4":""}},[i("v-text-field",{attrs:{label:"New item"},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}}),t._v(" "),i("v-btn",{attrs:{disabled:0===t.item.length},on:{click:function(e){t.addItem()}}},[t._v("Add Item")])],1),t._v(" "),i("v-flex",{attrs:{xs4:"","offset-xs4":""}},[i("h2",[t._v("Subscription Items")]),t._v(" "),i("v-list",t._l(t.items,function(e){return i("v-list-tile",{key:e.id},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n                "+t._s(e.name)+"\n              ")])],1),t._v(" "),i("v-list-tile-action",[i("v-btn",{staticClass:"error",on:{click:function(i){t.deleteDialog=!0,t.deleteID=e.id,t.migrateID=void 0}}},[t._v("Delete Item")])],1)],1)}),1)],1)],1)],1),t._v(" "),i("v-dialog",{attrs:{width:"300px"},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[i("v-card",{attrs:{tile:""}},[i("v-alert",{attrs:{value:!0,type:"warning"}},[t._v("\n      This action cannot be undone.\n      ")]),t._v(" "),i("v-card-text",[t._v("\n        Where would you like to migrate existing subscriptions with this item?\n      ")]),t._v(" "),i("v-card-actions",[i("v-radio-group",{model:{value:t.migrateID,callback:function(e){t.migrateID=e},expression:"migrateID"}},t._l(t.items.filter(function(e){return e.id!==t.deleteID}),function(t){return i("v-radio",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),i("v-card-actions",[i("v-btn",{on:{click:function(e){t.deleteDialog=!1,t.deleteID=void 0,t.migrateID=void 0}}},[t._v("Cancel")]),t._v(" "),i("v-btn",{staticClass:"error",attrs:{disabled:!t.migrateID},on:{click:function(e){t.deleteItems(t.deleteID,t.migrateID)}}},[t._v("Delete Item")])],1)],1)],1)],1)},staticRenderFns:[]};var S=i("VU/8")(C,F,!1,function(t){i("H6kn")},null,null).exports;s.default.use(c.a);var w=new c.a({mode:"history",routes:[{path:"/",name:"order",component:D},{path:"/items",name:"items",component:S}]}),k=i("mtWM"),y=i.n(k),A=i("IZMb"),I=i.n(A);s.default.config.productionTip=!1,s.default.use(r.a),s.default.use(I.a,{duration:3e3,iconPack:"fontawesome"}),s.default.prototype.$http=y.a,s.default.filter("formatDate",function(t){return f()(t,"MMM YYYY")}),new s.default({el:"#app",router:w,components:{App:l},template:"<App/>"})},k4Yb:function(t,e){},ly95:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7908fe386270a36b3fad.js.map